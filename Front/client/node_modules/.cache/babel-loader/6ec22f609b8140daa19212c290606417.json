{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\afaf5\\\\OneDrive\\\\\\uBC14\\uD0D5 \\uD654\\uBA74\\\\\\uCD5C\\uC885\\uBCF8\\\\react-BlockChain\\\\Front\\\\client\\\\src\\\\component\\\\ui\\\\Mypage_TransactionCard.jsx\",\n    _s = $RefreshSig$();\n\n//#region react\nimport React, { useState, useEffect } from 'react';\nimport io from \"socket.io-client\"; //#endregion\n//#region mui\n\nimport Card from '@mui/material/Card';\nimport CardActions from '@mui/material/CardActions';\nimport CardMedia from '@mui/material/CardMedia';\nimport Grid from '@mui/material/Grid';\nimport Box from '@mui/material/Box';\nimport CardContent from '@mui/material/CardContent';\nimport Typography from '@mui/material/Typography';\nimport Button from '@mui/material/Button'; //#endregion\n//#region 라이브러리\n\nimport Web3 from 'web3';\nimport NFTContract from '../../contracts/NFT.json'; //#endregion\n//#region 전역변수\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet web3;\nlet socket;\nlet NFTinstance; //#endregion\n\nfunction Mypage_TransactionCard(props) {\n  _s();\n\n  const {\n    cards,\n    username,\n    usernumber\n  } = props;\n  const [accounts, setAccounts] = useState(\"\");\n  const ENDPOINT = \"http://localhost:8080\";\n  useEffect(() => {\n    socket = io(ENDPOINT);\n\n    async function load() {\n      web3 = new Web3(Web3.givenProvider || 'http://localhost:8545');\n      setAccounts(await web3.eth.getAccounts());\n      const networkId = await web3.eth.net.getId();\n      const NFTdeployedNetwork = NFTContract.networks[networkId];\n      NFTinstance = new web3.eth.Contract(NFTContract.abi, NFTdeployedNetwork.address);\n    }\n\n    load(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  async function Tran(card) {\n    try {\n      const houseAddress = card.houseAddress;\n      const locations = card.locations;\n      const buyername = card.buyername;\n      const buyernumber = card.buyernumber;\n      const tokenId = card.tokenId;\n      await NFTinstance.methods.safeTransferFrom(accounts[0], card.buyerAddress, tokenId).send({\n        from: accounts[0],\n        gas: 900000\n      });\n      socket.emit(\"Delete_Approval\", {\n        username,\n        locations,\n        houseAddress\n      });\n      socket.on(\"Delete_Approval_Result\", () => {\n        socket.emit(\"Delete_House_Registration\", {\n          username,\n          locations,\n          houseAddress\n        });\n        socket.on(\"Delete_House_Registration_Result\", () => {\n          socket.emit(\"Token_Update\", {\n            username,\n            usernumber,\n            buyername,\n            buyernumber,\n            tokenId\n          });\n          alert(\"거래 승인 성공\");\n          window.location.replace(\"/post-UserMyPage\");\n        });\n      });\n    } catch (e) {\n      alert(e.message);\n      window.location.replace(\"/post-UserMyPage\");\n    }\n  }\n\n  function UserNameCard(card) {\n    return /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 5,\n      sm: 6,\n      md: 2.9,\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        sx: {\n          height: '100%',\n          display: 'flex',\n          flexDirection: 'column'\n        },\n        children: [/*#__PURE__*/_jsxDEV(CardMedia, {\n          component: \"img\",\n          sx: {\n            // 16:9\n            pt: '0%',\n            maxWidth: 250,\n            minWidth: 250,\n            minHeight: 150,\n            maxHeight: 150\n          },\n          src: card.sellerImg,\n          alt: \"random\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            sx: {\n              fontSize: 14\n            },\n            gutterBottom: true,\n            children: [\"\\uC8FC\\uC18C : \", card.houseAddress]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            sx: {\n              fontSize: 14\n            },\n            gutterBottom: true,\n            children: [\"\\uAC00\\uACA9 : \", card.housePrice]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            sx: {\n              fontSize: 14\n            },\n            gutterBottom: true,\n            children: [\"\\uAD6C\\uB9E4\\uC790 : \", card.buyername]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            sx: {\n              fontSize: 14\n            },\n            gutterBottom: true,\n            children: [\"\\uD310\\uB9E4\\uC790 : \", card.sellername]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            sx: {\n              fontSize: 14\n            },\n            gutterBottom: true,\n            children: [\"NFTID : \", card.tokenId]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              flexGrow: 1\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            size: \"small\",\n            onClick: () => {\n              Tran(card);\n            },\n            children: \"\\uAC70\\uB798 \\uC2B9\\uC778\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this)\n    }, card.houseAddress, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this);\n  } //#region 렌더링\n\n\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    container: true,\n    spacing: 4,\n    children: cards.map(card => UserNameCard(card))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 9\n  }, this); //#endregion\n}\n\n_s(Mypage_TransactionCard, \"IMqEv5g/X3beAeVacG91s+NqMlQ=\");\n\n_c = Mypage_TransactionCard;\nexport default Mypage_TransactionCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Mypage_TransactionCard\");","map":{"version":3,"names":["React","useState","useEffect","io","Card","CardActions","CardMedia","Grid","Box","CardContent","Typography","Button","Web3","NFTContract","web3","socket","NFTinstance","Mypage_TransactionCard","props","cards","username","usernumber","accounts","setAccounts","ENDPOINT","load","givenProvider","eth","getAccounts","networkId","net","getId","NFTdeployedNetwork","networks","Contract","abi","address","Tran","card","houseAddress","locations","buyername","buyernumber","tokenId","methods","safeTransferFrom","buyerAddress","send","from","gas","emit","on","alert","window","location","replace","e","message","UserNameCard","height","display","flexDirection","pt","maxWidth","minWidth","minHeight","maxHeight","sellerImg","fontSize","housePrice","sellername","flexGrow","map"],"sources":["C:/Users/afaf5/OneDrive/바탕 화면/최종본/react-BlockChain/Front/client/src/component/ui/Mypage_TransactionCard.jsx"],"sourcesContent":["//#region react\nimport React, { useState, useEffect } from 'react';\nimport io from \"socket.io-client\";\n//#endregion\n\n//#region mui\nimport Card from '@mui/material/Card';\nimport CardActions from '@mui/material/CardActions';\nimport CardMedia from '@mui/material/CardMedia';\nimport Grid from '@mui/material/Grid';\nimport Box from '@mui/material/Box';\nimport CardContent from '@mui/material/CardContent';\nimport Typography from '@mui/material/Typography';\nimport Button from '@mui/material/Button';\n//#endregion\n\n//#region 라이브러리\nimport Web3 from 'web3';\nimport NFTContract from '../../contracts/NFT.json'\n//#endregion\n\n//#region 전역변수\nlet web3;\nlet socket;\nlet NFTinstance;\n//#endregion\n\nfunction Mypage_TransactionCard(props) {\n    const { cards, username, usernumber } = props;\n    const [accounts, setAccounts] = useState(\"\");\n    const ENDPOINT = \"http://localhost:8080\";\n\n    useEffect(() => {\n        socket = io(ENDPOINT);\n        async function load() {\n            web3 = new Web3(Web3.givenProvider || 'http://localhost:8545');\n            setAccounts(await web3.eth.getAccounts());\n            const networkId = await web3.eth.net.getId();\n            const NFTdeployedNetwork = NFTContract.networks[networkId];\n            NFTinstance = new web3.eth.Contract(NFTContract.abi, NFTdeployedNetwork.address);\n        }\n        load();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    async function Tran(card) {\n        try {\n            const houseAddress = card.houseAddress\n            const locations = card.locations\n            const buyername = card.buyername\n            const buyernumber = card.buyernumber\n            const tokenId = card.tokenId\n            await NFTinstance.methods.safeTransferFrom(accounts[0], card.buyerAddress, tokenId).send({\n                from: accounts[0],\n                gas: 900000\n            })\n            socket.emit(\"Delete_Approval\", { username, locations, houseAddress });\n            socket.on(\"Delete_Approval_Result\", () => {\n                socket.emit(\"Delete_House_Registration\", { username, locations, houseAddress });\n                socket.on(\"Delete_House_Registration_Result\",()=>{\n                    socket.emit(\"Token_Update\", { username, usernumber, buyername, buyernumber, tokenId });\n                    alert(\"거래 승인 성공\")\n                    window.location.replace(\"/post-UserMyPage\")\n                })\n                \n            })\n        }\n        catch (e) {\n            alert(e.message)\n            window.location.replace(\"/post-UserMyPage\")        }\n    }\n\n    function UserNameCard(card) {\n        return (\n            <Grid item xs={5} sm={6} md={2.9} key={card.houseAddress}>\n                <Card\n                    sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}\n                >\n                    <CardMedia\n                        component=\"img\"\n                        sx={{\n                            // 16:9\n                            pt: '0%',\n                            maxWidth: 250,\n                            minWidth: 250,\n                            minHeight: 150,\n                            maxHeight: 150\n                        }}\n                        src={card.sellerImg}\n                        alt=\"random\"\n                    />\n                    <CardContent>\n                        <Typography sx={{ fontSize: 14 }} gutterBottom>\n                            주소 : {card.houseAddress}\n                        </Typography>\n                        <Typography sx={{ fontSize: 14 }} gutterBottom>\n                            가격 : {card.housePrice}\n                        </Typography>\n                        <Typography sx={{ fontSize: 14 }} gutterBottom>\n                            구매자 : {card.buyername}\n                        </Typography>\n                        <Typography sx={{ fontSize: 14 }} gutterBottom>\n                            판매자 : {card.sellername}\n                        </Typography>\n                        <Typography sx={{ fontSize: 14 }} gutterBottom>\n                            NFTID : {card.tokenId}\n                        </Typography>\n                    </CardContent>\n                    <CardActions>\n                        <Box sx={{ flexGrow: 1 }} />\n                        <Button size=\"small\" onClick={() => {\n                            Tran(card)\n                        }}>거래 승인</Button>\n                    </CardActions>\n                </Card>\n            </Grid>\n        )\n    }\n    //#region 렌더링\n    return (\n        <Grid container spacing={4}>\n            {cards.map((card) => (\n                UserNameCard(card)\n            ))}\n        </Grid>)\n    //#endregion\n}\n\nexport default Mypage_TransactionCard;"],"mappings":"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"},"metadata":{},"sourceType":"module"}